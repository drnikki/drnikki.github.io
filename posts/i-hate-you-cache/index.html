<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Working with caches you can't control | Dr. Nikki Stevens</title>
<meta name=keywords content><meta name=description content="Recently, I worked on a project where the client controlled their production environment. They&rsquo;re using EdgeCast and we didn&rsquo;t have access to force a cache clear when deploying new releases to production."><meta name=author content="Dr. Nikki Stevens"><link rel=canonical href=https://nikkistevens.com/posts/i-hate-you-cache/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://nikkistevens.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://nikkistevens.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://nikkistevens.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://nikkistevens.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://nikkistevens.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://nikkistevens.com/posts/i-hate-you-cache/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Working with caches you can't control"><meta property="og:description" content="Recently, I worked on a project where the client controlled their production environment. They&rsquo;re using EdgeCast and we didn&rsquo;t have access to force a cache clear when deploying new releases to production."><meta property="og:type" content="article"><meta property="og:url" content="https://nikkistevens.com/posts/i-hate-you-cache/"><meta property="og:image" content="https://nikkistevens.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-01-15T00:00:00+00:00"><meta property="article:modified_time" content="2013-01-15T00:00:00+00:00"><meta property="og:site_name" content="Dr. Nikki Stevens"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nikkistevens.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Working with caches you can't control"><meta name=twitter:description content="Recently, I worked on a project where the client controlled their production environment. They&rsquo;re using EdgeCast and we didn&rsquo;t have access to force a cache clear when deploying new releases to production."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://nikkistevens.com/posts/"},{"@type":"ListItem","position":2,"name":"Working with caches you can't control","item":"https://nikkistevens.com/posts/i-hate-you-cache/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Working with caches you can't control","name":"Working with caches you can\u0027t control","description":"Recently, I worked on a project where the client controlled their production environment. They\u0026rsquo;re using EdgeCast and we didn\u0026rsquo;t have access to force a cache clear when deploying new releases to production.","keywords":[],"articleBody":"Recently, I worked on a project where the client controlled their production environment. They’re using EdgeCast and we didn’t have access to force a cache clear when deploying new releases to production. So we’d push, ask them to clear cache, and wait as many as 8 - 10 hours to make sure everything was working fine. This sucks, but what I didn’t expect was that even after they cleared the cache, old files were still being served. So we’d ask for another cache clear, and wait. This was as painful as it sounds.\nEventually, they asked us to simply put no-cache headers on all of our files. This kind of defeats the purpose of even having a CDN, but okay. We tried that next. However, even with cache-control headers in place, the CDN would unpredictably serve older versions of .js and .css files. There was a lot of back and forth and finger pointing about who’s fault it really was that prior-release .js was still being delivered. They finally suggested that we rename our asset files with each release. This also sucks, but was at least a solution that we could control. With this script as part of our build, we met them halfway and sort of renamed asset files with each release.\nHere’s the repo for the super simple script should you ever find yourself in such a position.\n","wordCount":"230","inLanguage":"en","datePublished":"2013-01-15T00:00:00Z","dateModified":"2013-01-15T00:00:00Z","author":{"@type":"Person","name":"Dr. Nikki Stevens"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nikkistevens.com/posts/i-hate-you-cache/"},"publisher":{"@type":"Organization","name":"Dr. Nikki Stevens","logo":{"@type":"ImageObject","url":"https://nikkistevens.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nikkistevens.com/ accesskey=h title="Dr. Nikki Stevens (Alt + H)"><img src=https://nikkistevens.com/apple-touch-icon.png alt aria-label=logo height=35>Dr. Nikki Stevens</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://nikkistevens.com/about/ title=About><span>About</span></a></li><li><a href=https://nikkistevens.com/research/ title=Research><span>Research</span></a></li><li><a href=https://nikkistevens.com/open-source/ title="Open Source"><span>Open Source</span></a></li><li><a href=https://nikkistevens.com/posts/ title=Blog><span>Blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://nikkistevens.com/>Home</a>&nbsp;»&nbsp;<a href=https://nikkistevens.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Working with caches you can't control</h1><div class=post-meta><span title='2013-01-15 00:00:00 +0000 UTC'>January 15, 2013</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;230 words&nbsp;·&nbsp;Dr. Nikki Stevens</div></header><div class=post-content><p>Recently, I worked on a project where the client controlled their production environment. They&rsquo;re using EdgeCast and we didn&rsquo;t have access to force a cache clear when deploying new releases to production. So we&rsquo;d push, ask them to clear cache, and wait as many as 8 - 10 hours to make sure everything was working fine. This sucks, but what I didn&rsquo;t expect was that even after they cleared the cache, old files were still being served. So we&rsquo;d ask for another cache clear, and wait. This was as painful as it sounds.</p><p>Eventually, they asked us to simply put no-cache headers on all of our files. This kind of defeats the purpose of even having a CDN, but okay. We tried that next. However, even with cache-control headers in place, the CDN would unpredictably serve older versions of .js and .css files. There was a lot of back and forth and finger pointing about who&rsquo;s fault it <em>really</em> was that prior-release .js was still being delivered. They finally suggested that we rename our asset files with each release. This <em>also</em> sucks, but was at least a solution that we could control. With this script as part of our build, we met them halfway and sort of renamed asset files with each release.</p><p><a href=https://github.com/drnikki/cli-cachebuster>Here&rsquo;s the repo</a> for the super simple script should you ever find yourself in such a position.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><iframe width=540 height=405 src=https://1a058c67.sibforms.com/serve/MUIFAOaOgw-TPpQUNS1YvGcyubxS7qxJ_b3LDaS50tOWJFAbfMIpKsU81fcT3zxSv82FtAa0x_kd_NoZq_gMzEmy1RLrdXxUK98l9jL1QkzDjZMQfIynHJ6q3ebzvwqXsIMreuEnb6Y1vF8nMQduGMgmxx9NpbEe0G2X6sjmmo3cvS1Qv03-ZhU_z22_UgZ6kqQNAtuljoqL_F_z frameborder=0 scrolling=no allowfullscreen style=display:block;margin-left:auto;margin-right:auto;max-width:100%></iframe>
<span>&copy; 2024 <a href=https://nikkistevens.com/>Dr. Nikki Stevens</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>